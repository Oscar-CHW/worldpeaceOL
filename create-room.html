<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="create_room">创建房间 - 天下太平</title>
    <link rel="stylesheet" href="styles.css">
    <meta name="theme-color" content="#4a69bd">
    <!-- Preload critical assets -->
    <link rel="preload" href="js/ui-enhancement.js" as="script">
    <style>
        .nes-only { display: none !important; }
    </style>
</head>
<body class="loading">
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <header class="header">
        <div class="container">
            <div class="flex justify-between items-center">
                <div class="site-title-wrapper">
                    <a href="/" class="site-title" data-i18n="title">天下太平</a>
                </div>
                <button class="nav-toggle show-for-small-only" id="nav-toggle">☰</button>
                <div class="nav-links hide-for-small-only">
                    <a href="/" class="home-btn standard-only">
                        <i class="fas fa-home"></i> Home
                    </a>
                    <a href="/" class="home-btn nes-btn nes-only">
                        <i class="nes-icon is-small star"></i> Home
                    </a>
                    <a href="/dashboard.html" data-i18n="dashboard" class="standard-only">控制台</a>
                    <a href="/friends.html" data-i18n="friends" class="standard-only">好友</a>
                    <a href="/pairing.html" data-i18n="matchmaking" class="standard-only">匹配</a>
                    <a href="/dashboard.html" data-i18n="dashboard" class="nes-btn nes-only">控制台</a>
                    <a href="/friends.html" data-i18n="friends" class="nes-btn nes-only">好友</a>
                    <a href="/pairing.html" data-i18n="matchmaking" class="nes-btn nes-only">匹配</a>
                </div>
                <div class="auth-links hide-for-small-only">
                    <div class="user-welcome" id="user-welcome">
                        <div class="user-avatar" id="user-avatar">U</div>
                        <a href="#" id="logout-btn" class="btn standard-only" data-i18n="logout">登出</a>
                        <a href="#" id="logout-btn-nes" class="nes-btn is-error nes-only" data-i18n="logout">登出</a>
                    </div>
                </div>
            </div>
        </div>
        <!-- Mobile Navigation -->
        <div class="mobile-nav" id="mobile-nav">
            <div class="nav-links">
                <a href="/" class="home-btn standard-only">
                    <i class="fas fa-home"></i> Home
                </a>
                <a href="/" class="home-btn nes-btn nes-only">
                    <i class="nes-icon is-small star"></i> Home
                </a>
                <a href="/dashboard.html" data-i18n="dashboard" class="standard-only">控制台</a>
                <a href="/friends.html" data-i18n="friends" class="standard-only">好友</a>
                <a href="/pairing.html" data-i18n="matchmaking" class="standard-only">匹配</a>
                <a href="/dashboard.html" data-i18n="dashboard" class="nes-btn nes-only">控制台</a>
                <a href="/friends.html" data-i18n="friends" class="nes-btn nes-only">好友</a>
                <a href="/pairing.html" data-i18n="matchmaking" class="nes-btn nes-only">匹配</a>
            </div>
            <div class="auth-links">
                <div class="user-welcome" id="mobile-user-welcome">
                    <div class="user-avatar" id="mobile-user-avatar">U</div>
                    <span class="username" id="mobile-username-display">Username</span>
                    <a href="#" id="mobile-logout-btn" class="btn standard-only" data-i18n="logout">登出</a>
                    <a href="#" id="mobile-logout-btn-nes" class="nes-btn is-error nes-only" data-i18n="logout">登出</a>
                </div>
            </div>
        </div>
    </header>
    
    <div class="container content-medium" id="main-content">
        <div class="create-room-container card">
            <div class="create-room-header">
                <h2 data-i18n="create_room">创建房间</h2>
                <p class="subtitle" data-i18n="create_room_desc">自定义游戏设置并邀请好友</p>
            </div>
            
            <form id="create-room-form" class="room-settings-form">
                <div class="form-section glass">
                    <h3 data-i18n="basic_settings">基本设置</h3>
                    <div class="form-group">
                        <label for="room-name" data-i18n="room_name">房间名称</label>
                        <input type="text" id="room-name" data-i18n-placeholder="enter_room_name">
                    </div>
                    
                    <div class="form-group">
                        <label for="room-type" data-i18n="room_type">房间类型</label>
                        <select id="room-type">
                            <option value="public" data-i18n="public">公开</option>
                            <option value="private" data-i18n="private" selected>私人</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="max-players" data-i18n="max_players">最大玩家数</label>
                        <select id="max-players">
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-section glass">
                    <h3 data-i18n="game_settings">游戏设置</h3>
                    <div class="form-group">
                        <label for="game-mode" data-i18n="game_mode">游戏模式</label>
                        <select id="game-mode">
                            <option value="classic" data-i18n="classic_mode">经典模式</option>
                            <option value="casual" data-i18n="casual_mode">休闲模式</option>
                            <option value="blitz" data-i18n="blitz_mode">闪电模式</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="turn-time" data-i18n="turn_time">回合时间</label>
                        <select id="turn-time">
                            <option value="30">30 秒</option>
                            <option value="60" selected>60 秒</option>
                            <option value="90">90 秒</option>
                            <option value="120">120 秒</option>
                        </select>
                    </div>
                    
                    <div class="form-group checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="ranked-game" checked>
                            <span data-i18n="ranked_game">计入排名</span>
                        </label>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="primary-button" data-i18n="create_room">创建房间</button>
                    <a href="/dashboard.html" class="secondary-button" data-i18n="cancel">取消</a>
                </div>
            </form>
        </div>
        <div id="language-selector" class="language-selector"></div>

        <!-- Add offline support notification -->
        <div id="offline-notification" class="hidden">
            You are currently offline. Some features may be limited.
        </div>
    </div>
    
    <script type="module" src="js/common.js"></script>
    <script type="module" src="js/pages/create-room.js"></script>
    <script src="js/ui-enhancement.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Offline detection
            window.addEventListener('online', function() {
                document.getElementById('offline-notification').classList.add('hidden');
            });
            
            window.addEventListener('offline', function() {
                document.getElementById('offline-notification').classList.remove('hidden');
            });
            
            // Check initial state
            if (!navigator.onLine) {
                document.getElementById('offline-notification').classList.remove('hidden');
            }
            
            // Game mode change handler
            document.getElementById('game-mode').addEventListener('change', function() {
                const gameMode = this.value;
                const rankedCheckbox = document.getElementById('ranked-game');
                
                // Casual mode can't be ranked
                if (gameMode === 'casual') {
                    rankedCheckbox.checked = false;
                    rankedCheckbox.disabled = true;
                } else {
                    rankedCheckbox.disabled = false;
                }
            });
        });
    </script>
</body>
</html>