<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="matchmaking">åŒ¹é… - å¤©ä¸‹å¤ªå¹³</title>
    <link rel="stylesheet" href="styles.css">
    <meta name="theme-color" content="#4a69bd">
    <!-- Preload critical assets -->
    <link rel="preload" href="js/ui-enhancement.js" as="script">
</head>
<body class="loading">
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <div id="language-selector" class="glass"></div>
    
    <div class="header glass">
        <a href="/" class="site-title" data-i18n="title">å¤©ä¸‹å¤ªå¹³</a>
        <div class="nav-links">
            <a href="/dashboard.html" data-i18n="dashboard">æ§åˆ¶å°</a>
            <a href="/friends.html" data-i18n="friends">å¥½å‹</a>
            <a href="/pairing.html" data-i18n="matchmaking" class="active">åŒ¹é…</a>
        </div>
        <div class="auth-links">
            <a href="#" id="logout-btn" data-i18n="logout">ç™»å‡º</a>
        </div>
    </div>
    
    <div class="container content-medium" id="main-content">
        <div class="pairing-container card">
            <div class="pairing-header">
                <h2 data-i18n="matchmaking">åŒ¹é…</h2>
                <p class="subtitle" data-i18n="matchmaking_desc">é€‰æ‹©æ¸¸æˆæ¨¡å¼å¹¶ä¸å…¶ä»–ç©å®¶é…å¯¹</p>
            </div>
            
            <div class="game-modes-container glass">
                <h3 data-i18n="select_mode">é€‰æ‹©æ¸¸æˆæ¨¡å¼</h3>
                <div class="game-modes">
                    <div class="game-mode-card" id="mode-classic">
                        <div class="mode-icon">ğŸ†</div>
                        <h4 data-i18n="classic_mode">ç»å…¸æ¨¡å¼</h4>
                        <p data-i18n="classic_desc">æ ‡å‡†è§„åˆ™çš„æ¯”èµ›ï¼Œå½±å“ELOè¯„åˆ†</p>
                    </div>
                    <div class="game-mode-card" id="mode-casual">
                        <div class="mode-icon">ğŸ®</div>
                        <h4 data-i18n="casual_mode">ä¼‘é—²æ¨¡å¼</h4>
                        <p data-i18n="casual_desc">æ ‡å‡†è§„åˆ™ï¼Œä½†ä¸å½±å“ELOè¯„åˆ†</p>
                    </div>
                    <div class="game-mode-card" id="mode-blitz">
                        <div class="mode-icon">âš¡</div>
                        <h4 data-i18n="blitz_mode">é—ªç”µæ¨¡å¼</h4>
                        <p data-i18n="blitz_desc">å¿«èŠ‚å¥æ¸¸æˆï¼Œæ¯å›åˆæ—¶é—´ç¼©çŸ­</p>
                    </div>
                </div>
            </div>
            
            <div class="matchmaking-controls">
                <div class="queue-status" id="queue-status">
                    <div class="status-indicator"></div>
                    <span data-i18n="not_in_queue">æœªåœ¨é˜Ÿåˆ—ä¸­</span>
                </div>
                <button id="find-match-btn" class="primary-button" data-i18n="find_match">å¯»æ‰¾å¯¹æ‰‹</button>
                <button id="cancel-match-btn" class="secondary-button hidden" data-i18n="cancel">å–æ¶ˆ</button>
            </div>
            
            <div class="queue-timer hidden" id="queue-timer">
                <div class="timer-label" data-i18n="searching_time">æœç´¢æ—¶é—´</div>
                <div class="timer-value">00:00</div>
                <div class="queue-animation">
                    <div class="searching-dot"></div>
                    <div class="searching-dot"></div>
                    <div class="searching-dot"></div>
                </div>
            </div>
            
            <div class="estimated-time">
                <span data-i18n="estimated_wait">é¢„è®¡ç­‰å¾…æ—¶é—´</span>: <span id="estimated-wait-time">~1 åˆ†é’Ÿ</span>
            </div>
            
            <div class="players-online">
                <span data-i18n="players_online">åœ¨çº¿ç©å®¶</span>: <span id="online-player-count">-</span>
            </div>
        </div>
        
        <!-- Match Found Modal -->
        <div id="match-found-modal" class="modal" aria-labelledby="match-found-title" aria-hidden="true">
            <div class="modal-content glass">
                <div class="modal-header">
                    <h3 id="match-found-title" data-i18n="match_found">æ‰¾åˆ°å¯¹æ‰‹ï¼</h3>
                </div>
                <div class="modal-body">
                    <div class="match-info">
                        <div class="opponent-info">
                            <h4 data-i18n="opponent">å¯¹æ‰‹</h4>
                            <div id="opponent-details">
                                <div class="opponent-name" id="opponent-name"></div>
                                <div class="opponent-elo" id="opponent-elo"></div>
                            </div>
                        </div>
                        <div class="mode-info">
                            <h4 data-i18n="game_mode">æ¸¸æˆæ¨¡å¼</h4>
                            <div id="match-mode"></div>
                        </div>
                    </div>
                    <div class="acceptance-timer">
                        <div data-i18n="accept_countdown">è¯·åœ¨ä»¥ä¸‹æ—¶é—´å†…æ¥å—</div>
                        <div id="accept-timer">15</div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="accept-match-btn" class="success-button" data-i18n="accept">æ¥å—</button>
                    <button id="decline-match-btn" class="danger-button" data-i18n="decline">æ‹’ç»</button>
                </div>
            </div>
        </div>
        
        <!-- Add offline support notification -->
        <div id="offline-notification" class="hidden">
            You are currently offline. Some features may be limited.
        </div>
    </div>
    
    <script src="/socket.io/socket.io.js"></script>
    <script src="js/common.js"></script>
    <script type="module" src="js/pages/pairing.js"></script>
    <script src="js/ui-enhancement.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Offline detection
            window.addEventListener('online', function() {
                document.getElementById('offline-notification').classList.add('hidden');
            });
            
            window.addEventListener('offline', function() {
                document.getElementById('offline-notification').classList.remove('hidden');
            });
            
            // Check initial state
            if (!navigator.onLine) {
                document.getElementById('offline-notification').classList.remove('hidden');
            }
            
            // Game mode selection
            const gameModes = document.querySelectorAll('.game-mode-card');
            
            gameModes.forEach(mode => {
                mode.addEventListener('click', function() {
                    // Remove active class from all modes
                    gameModes.forEach(m => m.classList.remove('active'));
                    // Add active class to clicked mode
                    this.classList.add('active');
                });
            });
            
            // Activate classic mode by default
            document.getElementById('mode-classic').classList.add('active');
        });
    </script>
</body>
</html> 